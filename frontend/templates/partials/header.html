{% load static %}
<nav class="navbar" role="navigation" aria-label="Main navigation">
  <div class="container">
    <div class="nav-wrapper">
      <div class="logo-container">
        <a href="/" aria-label="Packaxis Home">
          <picture>
            <source srcset="{% static 'logo/packaxis dark-font.png' %}" media="(prefers-color-scheme: dark)">
            <img src="{% static 'logo/packaxis light-font.png' %}" alt="Packaxis Packaging Canada Logo" class="logo">
          </picture>
        </a>
      </div>

      <!-- Desktop Navigation Menu -->
      <ul class="nav-menu" role="menubar">
        <li role="none"><a href="/" class="nav-link" role="menuitem">Home</a></li>
        <li role="none"><a href="/products/" class="nav-link" role="menuitem">Products</a></li>
        {% for item in header_menu %}
        <li role="none">
          <a href="{{ item.url }}" class="nav-link" role="menuitem" {% if item.open_in_new_tab %}target="_blank" rel="noopener"{% endif %}>
            {% if item.icon_class %}<span class="{{ item.icon_class }}"></span>{% endif %}
            {{ item.title }}
          </a>
        </li>
        {% endfor %}
        <li role="none"><a href="/blog/" class="nav-link" role="menuitem">Blog</a></li>
        <li role="none"><a href="/faq/" class="nav-link" role="menuitem">FAQ</a></li>
      </ul>

      <!-- Desktop Search Bar -->
      <div class="nav-search-wrapper">
        <form action="/products/" method="get" class="nav-search-form" role="search">
          <div class="nav-search-input-wrapper">
            <input 
              type="search" 
              name="q" 
              placeholder="Search products..." 
              class="nav-search-input" 
              aria-label="Search products"
              autocomplete="off"
            >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="nav-search-icon" aria-hidden="true">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
          </div>
        </form>
      </div>

      <div class="nav-actions">
        <div class="nav-cart-wrapper">
          <a href="/checkout/" class="nav-cart-link" title="Shopping Cart" aria-label="Shopping cart">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            <span id="cart-badge" class="nav-cart-badge is-hidden" aria-live="polite">0</span>
          </a>
          <!-- Enterprise Cart Dropdown -->
          <div class="crt-dropdown" aria-label="Shopping cart preview" role="dialog">
            <div class="crt-dropdown__arrow"></div>
            <div class="crt-dropdown__inner">
              <!-- Empty State -->
              <div class="crt-empty">
                <div class="crt-empty__icon">
                  <span class="material-symbols-rounded">shopping_bag</span>
                </div>
                <h4 class="crt-empty__title">Your cart is empty</h4>
                <p class="crt-empty__text">Add items to get started</p>
                <a href="/products/" class="crt-empty__btn">
                  <span class="material-symbols-rounded">storefront</span>
                  Browse Products
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- User Account Section -->
        {% if user.is_authenticated %}
          <a href="/account/" class="nav-signin-btn desktop-only" title="My Account" aria-label="My account dashboard">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </a>
        {% else %}
          <a href="/accounts/login/" class="nav-signin-btn desktop-only" title="Sign In" aria-label="Sign in to your account">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </a>
        {% endif %}
      </div>
      <button class="hamburger" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="mobile-menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </button>
    </div>
  </div>
</nav>
